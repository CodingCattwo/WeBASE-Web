(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"/WRd":function(e,t,o){"use strict";var a=o("oLt1");o.n(a).a},F3iD:function(e,t,o){"use strict";o.r(t);var a=o("qse9"),c=o("mHBk"),n=o("bCcq").sha256,s={name:"accountDialog",props:{accountDialogOptions:{type:Object}},watch:{"accountDialogOptions.type":{handler:function(e){switch(this.type=e,e){case"creat":this.accountForm={name:"",password:"",role:100001,disabled:!1,mDisabled:!1,dShow:!0,mShow:!0};break;case"delete":this.accountForm={name:this.accountDialogOptions.data.account,password:"",role:this.accountDialogOptions.data.roleId,disabled:!0,mDisabled:!0,dShow:!1};break;case"modify":this.accountForm={name:this.accountDialogOptions.data.account,password:"",role:this.accountDialogOptions.data.roleId,disabled:!0,mDisabled:!1,dShow:!0,mShow:!1}}},deep:!0,immediate:!0}},data:function(){return{type:this.accountDialogOptions.type,loading:!1,accountForm:{},roleList:[],inputType:"password",rules:{name:[{required:!0,message:"请输入帐号",trigger:"blur"},{min:1,max:12,message:"长度在 1 到 12 个字符",trigger:"blur"},{pattern:/^[A-Za-z0-9]+$/,message:"用户名只能输入字母和数字",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:12,message:"长度在 6 到 12 个字符",trigger:"blur"},{pattern:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{6,12}$/,message:"字母,数字组成,且至少包含一个大写字母和一个小写字母",trigger:"blur"}]}}},mounted:function(){this.getRoleList()},methods:{modelClose:function(){this.$emit("close",!1)},submit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$confirm("确认提交？",{center:!0}).then(function(){t.loading=!0,t.getAllAccountInfo()}).catch(function(){t.modelClose()})})},getRoleList:function(){var e,t=this;e={networkId:localStorage.getItem("networkId"),pageNumber:"",pageSize:"",roleId:"",roleName:""},Object(c.J)({},e).then(function(e){0===e.data.code?t.roleList=e.data.data:t.$message({type:"error",message:t.errcode.errCode[e.data.code].cn})}).catch(function(e){t.$message({type:"error",message:t.errcode.errCode[e.data.code].cn||"系统错误"})})},getAllAccountInfo:function(){switch(this.type){case"creat":this.getCreatAccountInfo();break;case"modify":this.getModifyAccountInfo();break;case"delete":this.getDeleteAccountInfo()}},getCreatAccountInfo:function(){var e=this,t={account:this.accountForm.name,accountPwd:n(this.accountForm.password),roleId:this.accountForm.role};Object(c.e)(t,{}).then(function(t){e.loading=!1,0===t.data.code?(e.$message({type:"success",message:"新增成功"}),e.modelClose(),e.$emit("success")):(e.modelClose(),e.$message({type:"error",message:e.errcode.errCode[t.data.code].cn}))}).catch(function(t){e.modelClose(),e.$message({type:"error",message:e.errcode.errCode[t.data.code].cn||"系统错误"})})},getModifyAccountInfo:function(){var e=this,t={account:this.accountForm.name,accountPwd:n(this.accountForm.password),roleId:this.accountForm.role};Object(c.C)(t,{}).then(function(t){e.loading=!1,0===t.data.code?(e.$message({type:"success",message:"修改成功"}),e.modelClose(),e.$emit("success")):(e.modelClose(),e.$message({type:"error",message:e.errcode.errCode[t.data.code].cn}))}).catch(function(t){e.modelClose(),e.$message({type:"error",message:e.errcode.errCode[t.data.code].cn||"系统错误"})})},getDeleteAccountInfo:function(){var e=this;Object(c.f)(this.accountForm.name,{}).then(function(t){e.loading=!1,0===t.data.code?(e.$message({type:"success",message:"删除成功"}),e.modelClose(),e.$emit("success")):(e.modelClose(),e.$message({type:"error",message:e.errcode.errCode[t.data.code].cn}))}).catch(function(t){e.modelClose(),e.$message({type:"error",message:e.errcode.errCode[t.data.code].cn||"系统错误"})})},showPassword:function(){"password"===this.inputType?this.inputType="text":this.inputType="password"}}},i=(o("/WRd"),o("KHd+")),r=Object(i.a)(s,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-form",{ref:"accountForm",staticClass:"demo-ruleForm",attrs:{model:e.accountForm,rules:e.rules,"label-width":"100px"}},[o("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"帐号",prop:"name"}},[o("el-input",{attrs:{placeholder:"请输入帐号",maxlength:"12",disabled:e.accountForm.disabled},model:{value:e.accountForm.name,callback:function(t){e.$set(e.accountForm,"name",t)},expression:"accountForm.name"}})],1),e._v(" "),e.accountForm.dShow?o("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"密码",prop:"password"}},[o("el-input",{attrs:{placeholder:"请输入密码",minlength:"6",maxlength:"12",type:e.inputType},model:{value:e.accountForm.password,callback:function(t){e.$set(e.accountForm,"password",t)},expression:"accountForm.password"}},[o("i",{class:["password"===e.inputType?"el-icon-view":"wbs-icon-view-hidden"],staticStyle:{color:"#00122C"},attrs:{slot:"suffix"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.showPassword(t)}},slot:"suffix"})])],1):e._e(),e._v(" "),e.accountForm.mShow?o("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"角色",prop:"role"}},[o("el-select",{attrs:{placeholder:"请选择",disabled:e.accountForm.mDisabled},model:{value:e.accountForm.role,callback:function(t){e.$set(e.accountForm,"role",t)},expression:"accountForm.role"}},e._l(e.roleList,function(e){return o("el-option",{key:e.roleId,attrs:{label:e.roleNameZh,value:e.roleId}})}),1)],1):e._e()],1),e._v(" "),o("div",{staticClass:"dialog-footer"},[o("el-button",{on:{click:e.modelClose}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){e.submit("accountForm")}}},[e._v("确 定")])],1)],1)},[],!1,null,"0312554e",null).exports,l={name:"accountList",components:{contentHead:a.a,accountDialog:r},data:function(){return{accountName:"",loading:!1,currentPage:1,pageSize:10,total:0,accountDialogVisible:!1,accountDialogTitle:"",accountDialogOptions:{},accountHeader:[{enName:"account",name:"帐号"},{enName:"roleNameZh",name:"角色"},{enName:"operate",name:"操作"}],accountList:[]}},mounted:function(){this.getAccountList()},methods:{success:function(){this.getAccountList()},close:function(e){this.accountDialogVisible=e},getAccountList:function(){var e=this;this.loading=!0;var t={pageNumber:this.currentPage,pageSize:this.pageSize};Object(c.a)(t,{account:""}).then(function(t){e.loading=!1,0===t.data.code?(e.accountList=t.data.data||[],e.total=t.data.totalCount):e.$message({type:"error",message:e.errcode.errCode[t.data.code].cn})}).catch(function(t){e.loading=!1,e.$message({type:"error",message:e.errcode.errCode[t.data.code].cn||"系统错误！"})})},handleSizeChange:function(e){this.pageSize=e,this.currentPage=1,this.getAccountList()},handleCurrentChange:function(e){this.currentPage=e,this.getAccountList()},creatAccount:function(){this.accountDialogVisible=!0,this.accountDialogTitle="创建帐号",this.accountDialogOptions={type:"creat",data:{account:"",role:""}}},deleteAccount:function(e,t){this.accountDialogOptions={type:t,data:e},this.accountDialogVisible=!0,this.accountDialogTitle="删除帐号"},modifyAccount:function(e,t){this.accountDialogOptions={type:t,data:e},this.accountDialogVisible=!0,this.accountDialogTitle="修改帐号"}}},u=(o("f2cL"),Object(i.a)(l,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"account-wrapper"},[o("content-head",{attrs:{headTitle:"账户管理"}}),e._v(" "),o("div",{staticClass:"module-wrapper"},[o("div",{staticClass:"search-part"},[o("div",{staticClass:"search-part-left"},[o("el-button",{staticClass:"search-part-left-btn",attrs:{type:"primary"},on:{click:e.creatAccount}},[e._v("新增账号")])],1)]),e._v(" "),o("div",{staticClass:"search-table"},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.accountList,"tooltip-effect":"light"}},e._l(e.accountHeader,function(t){return o("el-table-column",{key:t.enName,attrs:{label:t.name,"show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return["operate"!=t.enName?[o("span",[e._v(e._s(a.row[t.enName]))])]:[o("el-button",{staticStyle:{color:"#ed5454"},attrs:{type:"text",size:"small"},on:{click:function(t){e.deleteAccount(a.row,"delete")}}},[e._v("删除")]),e._v(" "),o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.modifyAccount(a.row,"modify")}}},[e._v("修改")])]]}}])})}),1),e._v(" "),o("el-pagination",{staticClass:"page",attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,50],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),e.accountDialogVisible?o("el-dialog",{staticClass:"dialog-wrapper",attrs:{visible:e.accountDialogVisible,title:e.accountDialogTitle,width:"433px","append-to-body":!0,center:!0},on:{"update:visible":function(t){e.accountDialogVisible=t}}},[o("account-dialog",{attrs:{accountDialogOptions:e.accountDialogOptions},on:{success:e.success,close:e.close}})],1):e._e()],1)])],1)},[],!1,null,"a32169e6",null));t.default=u.exports},RmKq:function(e,t,o){},f2cL:function(e,t,o){"use strict";var a=o("RmKq");o.n(a).a},oLt1:function(e,t,o){}}]);