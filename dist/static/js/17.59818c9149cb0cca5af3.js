(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{Atqu:function(e,t,o){},U3a8:function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("v-content-head",{attrs:{headTitle:"节点管理"},on:{changGroup:e.changGroup}}),e._v(" "),o("div",{staticClass:"module-wrapper"},[o("div",{staticClass:"search-part"},[o("div",{staticClass:"search-part-left"},[o("el-button",{staticClass:"search-part-left-btn",attrs:{type:"primary"},on:{click:e.createFront}},[e._v("新增节点")])],1),e._v(" "),o("div",{staticClass:"search-part-right"},[o("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入节点ip"},model:{value:e.frontId,callback:function(t){e.frontId=t},expression:"frontId"}},[o("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"})],1)],1)]),e._v(" "),o("div",{staticClass:"search-table"},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"search-table-content",attrs:{data:e.frontData}},[e._l(e.nodeHead,function(t){return o("el-table-column",{key:t.enName,attrs:{label:t.name,"show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return["frontIp"!=t.enName?o("span",[e._v(e._s(n.row[t.enName]))]):o("span",[o("router-link",{staticClass:"link",attrs:{to:{path:"hostDetail",query:{nodeIp:n.row.frontIp,nodeId:n.row.frontId}}}},[e._v(e._s(n.row[t.enName]))])],1)]}}],null,!0)})}),e._v(" "),o("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){return e.deletedFront(t.row)}}},[e._v("删除")])]}}])})],2),e._v(" "),o("el-pagination",{staticClass:"page",attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,50],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),e.frontShow?o("v-setFront",{attrs:{show:e.frontShow,showClose:!0},on:{close:e.close}}):e._e()],1)])],1)};n._withStripped=!0;var r=o("qse9"),a=o("mHBk"),s=(o("DgvE"),o("p5Bo")),i=o("cNqd"),l={name:"node",components:{"v-content-head":r.a,"v-setFront":i.a},watch:{$route:function(){this.urlQuery=this.$root.$route.query}},data:function(){return{frontShow:!1,nodeName:"",nodes:[],frontData:[],currentPage:1,pageSize:10,total:0,loading:!1,nodesLoading:!1,nodesDialogVisible:!1,nodesDialogTitle:"",nodesDialogOptions:{},frontId:null,nodeHead:[{enName:"frontId",name:"前置编号"},{enName:"frontIp",name:"ip"},{enName:"frontPort",name:"前置端口"},{enName:"createTime",name:"创建时间"},{enName:"modifyTime",name:"修改时间"}],urlQuery:this.$root.$route.query}},mounted:function(){this.getFrontTable()},methods:{changGroup:function(){this.getFrontTable()},search:function(){this.getFrontTable()},getFrontTable:function(){var e=this,t={frontId:this.frontId};Object(a.r)(t).then(function(t){0===t.data.code?(e.total=t.data.totalCount,e.frontData=t.data.data||[],e.loading=!1):(e.loading=!1,e.$message({message:s.a.errCode[t.data.code].cn,type:"error",duration:2e3}))}).catch(function(t){e.loading=!1,e.$message({message:"查询失败！",type:"error",duration:2e3})})},handleSizeChange:function(e){this.pageSize=e,this.currentPage=1,this.getFrontTable()},handleCurrentChange:function(e){this.currentPage=e,this.getFrontTable()},textColor:function(e){var t="";switch(e){case 1:t="#58cb7d";break;case 2:t="#ed5454"}return t},nodesStatus:function(e){var t="";switch(e){case 1:t="运行";break;case 2:t="停止"}return t},createFront:function(){this.frontShow=!0},deleteNodes:function(e,t){this.nodesDialogOptions={type:t,data:e},this.nodesDialogVisible=!0,this.nodesDialogTitle="删除节点"},close:function(e){this.frontShow=!1,this.getFrontTable()},showDetail:function(e){2!==e.nodeType&&this.$router.push({path:"hostDetail",query:{nodeIp:e.nodeIp,nodeId:e.nodeId}})},deletedFront:function(e){var t=this;Object(a.h)(e.frontId).then(function(e){0===e.data.code?t.getFrontTable():t.$message({message:s.a.errCode[e.data.code].cn,type:"error",duration:2e3})}).catch(function(e){t.$message({message:"系统错误",type:"error",duration:2e3})})}}},c=(o("UXI7"),o("KHd+")),d=Object(c.a)(l,n,[],!1,null,"839e75ce",null);d.options.__file="src/views/front/front.vue";t.default=d.exports},UXI7:function(e,t,o){"use strict";var n=o("Atqu");o.n(n).a},cNqd:function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-dialog",{staticClass:"dialog-wrapper",attrs:{title:"节点配置",visible:e.dialogVisible,"before-close":e.modelClose,width:"433px",center:!0,"show-close":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("div",[o("el-form",{ref:"frontFrom",staticClass:"demo-ruleForm",attrs:{model:e.frontFrom,rules:e.rules,"label-width":"100px"}},[o("el-form-item",{staticStyle:{width:"330px"},attrs:{label:"ip",prop:"ip"}},[o("el-input",{model:{value:e.frontFrom.ip,callback:function(t){e.$set(e.frontFrom,"ip",t)},expression:"frontFrom.ip"}})],1),e._v(" "),o("el-form-item",{staticStyle:{width:"330px"},attrs:{label:"前置端口",prop:"port"}},[o("el-input",{model:{value:e.frontFrom.port,callback:function(t){e.$set(e.frontFrom,"port",t)},expression:"frontFrom.port"}})],1),e._v(" "),o("el-form-item",{staticStyle:{width:"330px"},attrs:{label:"所属机构",prop:"company"}},[o("el-input",{model:{value:e.frontFrom.company,callback:function(t){e.$set(e.frontFrom,"company",t)},expression:"frontFrom.company"}})],1)],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.closeVisible?o("el-button",{on:{click:e.modelClose}},[e._v("取 消")]):e._e(),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit("frontFrom")}}},[e._v("确 定")])],1)])],1)};n._withStripped=!0;var r=o("mHBk"),a=o("p5Bo"),s={name:"setFront",props:["show","showClose"],data:function(){return{dialogVisible:this.show,closeVisible:this.showClose||!1,frontFrom:{ip:"",port:"",company:""},rules:{ip:[{required:!0,message:"请输入ip名称",trigger:"blur"},{pattern:/((25[0-5]|2[0-4]\d|((1\d{2})|([1-9]?\d)))\.){3}(25[0-5]|2[0-4]\d|((1\d{2})|([1-9]?\d)))/,message:"ip不符合规则",trigger:"blur"}],port:[{required:!0,message:"请输入端口名称",trigger:"blur"},{min:1,max:12,message:"长度在 1 到 12 个数字",trigger:"blur"},{pattern:/^[0-9]*[1-9][0-9]*$/,message:"端口不符合规则",trigger:"blur"}],company:[{required:!0,message:"请输入机构名称",trigger:"blur"},{min:1,max:12,message:"长度在 1 到 12 位",trigger:"blur"},{pattern:/^([\u4E00-\uFA29]|[\uE7C7-\uE7F3]|[a-zA-Z0-9_]){1,20}$/,message:"机构名称请输入中文、英文和数字",trigger:"blur"}]}}},methods:{submit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.setFront()})},setFront:function(){var e=this,t={frontIp:this.frontFrom.ip,frontPort:this.frontFrom.port,agency:this.frontFrom.company};Object(r.b)(t).then(function(t){0===t.data.code?(e.$message({message:"添加前置成功",type:"success"}),e.$emit("close")):e.$message({message:a.a.errCode[t.data.code].cn||"添加前置失败",type:"error"})}).catch(function(t){e.$message({message:"系统错误",type:"error"})})},modelClose:function(){this.$emit("close")}}},i=o("KHd+"),l=Object(i.a)(s,n,[],!1,null,null,null);l.options.__file="src/views/index/dialog/setFront.vue";t.a=l.exports}}]);